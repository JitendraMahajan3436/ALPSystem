<!DOCTYPE html>

<html>
<head>
    <meta charset="UTF-8">
    <meta charset="utf-8">
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <title>@ViewBag.Title</title>

    @using System.Globalization
 
    @using System.Threading;
   
    @{
        var globalData = (REIN_MES_System.Models.GlobalData)ViewData["GlobalDataModel"];
        //@item.FileName  // instead .FileName use property which u used in ur model class
        REIN_MES_System.Models.REIN_SOLUTIONEntities db = new REIN_MES_System.Models.REIN_SOLUTIONEntities();
        
    }

    @Styles.Render("~/fdtheme/bootstrap")

    <!-- Font Awesome Icons -->
    <link href="~/Content/theme/fonts/font-awesome.min.css" rel="stylesheet" />
    <!-- Ionicons -->
    <link href="~/Content/theme/fonts/ionicons.min.css" rel="stylesheet" />
    @Styles.Render("~/fdtheme/Font_Icons")

    @Styles.Render("~/fdtheme/css")

    @Styles.Render("~/Content/site")

    @RenderSection("styles", required: false)

    @Scripts.Render("~/fdtheme/js")

    @Scripts.Render("~/fdtheme/ajaxroutine")

    @Styles.Render("~/fdtheme/spinner_css")
    @Scripts.Render("~/fdtheme/spinner_js")

    <style>
        .q-strip {
            margin-bottom: -0.7%;
            box-shadow: 0 1px 0px rgba(0, 0, 0, 0.12), 3px 4px 1px rgba(66, 59, 59, 0.24);
            border: dashed;
            border: medium;
            text-align: center;
            font-weight: BOLD;
            font-size: 15px;
            margin-top: 5px;
            background-color: rgb(243, 156, 18);
            margin-top: 4.55%;
            color: #f6f6f6;
            width: 105%;
            margin-left: -1%;
            position: fixed;
            z-index: 1030;
            margin-top: 2.6%;
            height: 36px;
        }
    </style>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>
<body class="sidebar-mini skin-yellow" id="bodyid">
    <div class="wrapper">
        <div class="wrapper">
            
            <!-- TOP NAVIGATIONS -->
            @Html.Partial("admin/_Header")
            <!-- =============================================== -->
            <!-- Left side column. contains the sidebar -->
            @Html.Partial("admin/_Left")

            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper" style="min-height:100px">
                <!-- Content Header (Page header) -->
                <section class="content-header" style="margin-bottom:6%">
                        @{
                            if (globalData != null)
                            {
                                <input type="hidden" id="hdnRoleID" />
                                <input type="hidden" id="hdnMenuID" />
                                <div class="q-strip">
                                    <div style="float:left">
                                        <ol class="breadcrumb" style="background-color:#222d3200;padding: 4px; font-size: 12px;margin-top: 6px;text-align: center;">
                                            @*<li><a href="/"><i class="fa fa-dashboard"></i> Home</a></li>*@
                                           
                                            <li><label style="font-size:12px" id="hdnRole"></label>&nbsp;&#8594;</li>
                                            <li><label style="font-size:12px" id="hdnMenu"></label></li>
                                        </ol>

                                    </div>
                                    <label class="center-block" id="page33">
                                        @globalData.pageTitle
                                        @*<small>@globalData.subTitle</small>*@
                                    </label>


                                </div>
                            }
                        }
                    </section>

                @{ if (globalData != null)
                    {
                        if (globalData.isErrorMessage == true || globalData.isSuccessMessage == true || globalData.isAlertMessage == true)
                        {
                            <div class="box-body">
                                @{
                                    if (globalData != null)
                                    {
                                        <div class="alert @{ if (globalData.isErrorMessage == true) { <text>alert-danger</text>}
                                                 else if (globalData.isSuccessMessage == true){ <text>alert-info</text>}
                                                 else if (globalData.isAlertMessage == true){<text>alert-warning</text>} } alert-dismissable" @{ if ((globalData.isErrorMessage == true) || (globalData.isSuccessMessage == true) || (globalData.isAlertMessage == true)) { <text> style="display:block;" </text>       } else { <text> style="display:none;" </text>      } }>
                                            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                                            <h4>
                                                <i class="icon fa @{ if (globalData.isErrorMessage == true) { <text>fa-ban</text>}
                                                 else if (globalData.isSuccessMessage == true){ <text>fa-check</text>}
                                                 else if (globalData.isAlertMessage == true){<text>fa-warning</text>} }"></i> @globalData.messageTitle
                                            </h4>
                                            @globalData.messageDetail
                                        </div>
    }
                                }
                            </div>
        }
    }
                }

                <!-- Main content -->
                <section class="content">
                    
                    <!-- Default box -->
                    <div class="box">
                        @*<div class="box-header with-border">
                                @{
                                    if (globalData!=null)
                                    {
                                        <h3 class="box-title">@globalData.contentTitle</h3>
                                    }
                                 }
                                <div class="box-tools pull-right">
                                    <button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="fa fa-minus"></i></button>
                                    <button class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove"><i class="fa fa-times"></i></button>
                                </div>
                            </div>*@
                        <div class="box-body">

                            <div>
                                
                                @RenderBody()
                            </div>
                        </div><!-- /.box-body -->
                        @*<div class="box-footer">
                                @{
                                    if (globalData!=null)
                                    {
                                        @globalData.contentFooter
                                    }
                                 }
                            </div>*@<!-- /.box-footer-->
                        @*<br/><br />*@
                    </div><!-- /.box -->

                </section><!-- /.content -->
            </div><!-- /.content-wrapper -->

            
            <!-- Footer. Contain the footer items -->
            @*@Html.Partial("admin/_Footer")*@

            @RenderSection("scripts", required: false)

        </div>

    </div>
    
    <div class="loading_global_spinner_image" style="display:none;">
        <img src="~/Content/images/gears.gif" />
    </div>
    @*<div id="shop_help_support" class="container sidebar sidebar-right" data-status="closed" style="right: 0px; height: auto;">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg1-12" data-side="right">

                <div class="list-group"></div>
            </div>
        </div>
        <div class="toggler">
            <span class="glyphicon glyphicon-chevron-right" style="display: block;">&nbsp;</span> <span class="glyphicon glyphicon-chevron-left" style="display: none;">&nbsp;</span>
        </div>
    </div>*@
    
</body>
</html>

@section scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
<script type="text/javascript">
    
    var subMenuId = sessionStorage.getItem("subMenuId");
    var MenuID = sessionStorage.getItem("MenuID");
   
    $("#hdnRoleID").val(MenuID); 
    $("#hdnMenuID").val(subMenuId);
    debugger;
    if (subMenuId != null && MenuID != null) {
        var url = "/User/GetMenuRoleData";
        ajaxpack.getAjaxRequest(url, "MenuID=" + subMenuId + "&RoleID=" + MenuID + "", showLineStationID, "json");
       
    }

    function showLineStationID() {
        var myajax = ajaxpack.ajaxobj
        var myfiletype = ajaxpack.filetype
        if (myajax.readyState == 4) {
            if (myajax.status == 200 || window.location.href.indexOf("http") == -1) { //if request was successful or running script locally
                debugger;
                var jsonRes = $.parseJSON(myajax.responseText);
                $("#hdnMenu").html(jsonRes.Menu);
                $("#hdnRole").html(jsonRes.Role);
            }
        }
    }

    var url = window.location;
    
    // for sidebar menu entirely but not cover treeview
    $('ul.sidebar-menu a').filter(function () {
        return this.href == url;
    }).parent().addClass('active');

    // for treeview
    //$('ul.treeview-menu a').filter(function () {
    //    return this.href == url;
    //}).parentsUntil(".sidebar-menu > .treeview-menu").addClass('active');

    if (subMenuId != "") {
        debugger;
            $("#treeview_" + subMenuId).addClass('active');
            $("#li_" + MenuID).addClass('active');
            $("#treeview_menu_" + subMenuId).addClass('menu-open');
    }

    function updateMenu(MenuID, subMenuId) {
        
        sessionStorage.setItem("subMenuId", subMenuId);
        sessionStorage.setItem("MenuID", MenuID);
    }

    function UpdateMainMenu(id)
    {
        setTimeout(function () {
            if (subMenuId == id) {
                $("#treeview_" + subMenuId).addClass('active');
                $("#treeview_menu_" + subMenuId).addClass('menu-open');
                $("#li_" + MenuID).addClass('active');
            }
        }, 500);

    }
    //function updateExpandRow(id)
    //{
    //    sessionStorage.setItem("ExpandMenu", id);

    //}

    $(document).ready(function () {
        window.setInterval(function () {
            $.getJSON('/Base/IsSession', function (data) {

                if (data == false) {
                    location.href = "/User/Index";
                }
            });
        }, 7000);
    });
</script>